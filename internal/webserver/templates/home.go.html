<html>
  {{ template "html-header" . }}
  <body>
    {{ template "header" . }}
    <hr />
    <h2>overview</h2>
    <div class="table-scroller">
      <table>
        <thead>
          {{ range $cell := index .Pivot 0 }}
          <th>{{ $cell }}</th>
          {{ end }}
        </thead>
        <tbody>
          {{ range $row := slice .Pivot 1 }}
          <tr>
            {{ range $cell := $row }}
            <td>{{ $cell }}</td>
            {{ end }}
          </tr>
          {{ end }}
        </tbody>
      </table>

      <ul>
        {{ range .JobNames }} {{ if . }}
        <li>
          <a
            href="/search?jq=%7B%22where%22%3A+%7B%22%3D%3D%22%3A%5B%7B%22var%22%3A%22name%22%7D%2C+%22{{.}}%22%5D%7D%7D"
            >== name {{ . }}</a
          >
        </li>
        {{ end }} {{ end }}
      </ul>
    </div>
    <hr />
    <h2>schedulers</h2>
    <div class="table-scroller">
      <table>
        <thead>
          <th>id</th>
          <th>schedule</th>
          <th>name</th>
          <th>input</th>
          <th>created_at</th>
          <th>updated_at</th>
        </thead>
        <tbody>
          {{ range .Schedulers }}
          <tr>
            <td><a href="/schedulers/{{ .ID }}">{{ .ID }}</a></td>
            <td>{{ .Schedule }}</td>
            <td>{{ .JobName }}</td>
            <td><pre>{{ .InputStr }}</pre></td>
            <td>{{.CreatedAt}}</td>
            <td>{{.UpdatedAt}}</td>
          </tr>
          {{ end }}
        </tbody>
      </table>
    </div>
    <hr />
    <h2>jobs</h2>
    <div class="table-scroller">
      <table>
        <thead>
          <th>id</th>
          <th>name</th>
          <th>status</th>
          {{/*
          <th>input</th>
          <th>output</th>
          */}}
          <th>scheduled_for</th>
          <th>claimed_at</th>
          <th>succeeded_at</th>
          <th>errored_at</th>
          <th>created_at</th>
          <th>updated_at</th>
        </thead>
        <tbody>
          {{ range .Jobs }}
          <tr>
            <td><a href="/jobs/{{ .ID }}">{{ .ID }}</a></td>
            <td>{{ .Name }}</td>
            <td>{{ .Status }}</td>
            {{/*
            <td><pre>{{ .InputStr }}</pre></td>
            */}} {{/*
            <td><pre>{{ .OutputStr }}</pre></td>
            */}}
            <td>{{ .ScheduledFor }}</td>
            <td>{{ .ClaimedAt }}</td>
            <td>{{ .SucceededAt }}</td>
            <td>{{ .ErroredAt }}</td>
            <td>{{ .CreatedAt }}</td>
            <td>{{ .UpdatedAt }}</td>
          </tr>
          {{ end }}
        </tbody>
      </table>
    </div>
  </body>
</html>
